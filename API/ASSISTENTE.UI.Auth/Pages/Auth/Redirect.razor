@page "/auth/redirect"
@using ASSISTENTE.UI.Common.Extensions

@inject SubabaseClient SubabaseClient
@inject NavigationManager NavigationManager

<PageTitle>Redirect login...</PageTitle>

@AccessToken

@code {
    
    string? AccessToken { get; set; }
    
    protected override async Task OnInitializedAsync()
    {
        AccessToken = NavigationManager.GetQueryString<string>("access_token");

        try
        {
            // TODO: Login with the access token
            // var response = await SubabaseClient.Auth.SignIn(...)
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        
        NavigationManager.NavigateTo("/");
    }

}